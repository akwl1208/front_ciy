<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>jquery : 체크박스 - each 예제 </title>
	<script src="../js/jquery.js"></script>
	<style>
		.text-box{
			height: 30px; line-height: 30px; border: 1px solid black;
		}
	</style>
</head>
<body>
	<!-- 체크박스를 선택하면 순서대로 글자가 나타나는 코드 -->
	<div class="text-box"></div>
	<div class="check-box">
		<input type="checkbox" class="ck-apple fruit" value="사과" id="apple">
		<label class="label-apple" for="apple">사과</label>

		<input type="checkbox" class="ck-orange fruit" value="오렌지" id="orange">
		<label class="label-orange" for="orange">오렌지</label>

		<input type="checkbox" class="ck-banana fruit" value="바나나" id="banana">
		<label class="label-banana" for="banana">바나나</label>
		
	</div>
	<script>
		var arr = ['사과', '바나나'];
		$(function () {
			/* 
			// each과 this 사용
			$('.fruit').each(function () {
				$(this).click(function () {
					var val = $(this).val();
					if($(this).prop('checked')){
						arr.push(val);
					}else{
						var index = arr.indexOf(val);
						arr.splice(index,1);
					}
					$('.text-box').text(arr.join(', '));
				})
			})*/
			
			// this 사용
			$('.fruit').click(function(){
				var val = $(this).val();
				if($(this).prop('checked')){
					arr.push(val);
				}else{
					var index = arr.indexOf(val);
					arr.splice(index,1);
				}
				$('.text-box').text(arr.join(', '));
			})			

			$('.fruit').each(function () {
				var val = $(this).val();
				var index = arr.indexOf(val);
				if(index >= 0){
					arr.splice(index,1);
					$(this).click();
				}
			})
		})
	</script>
</body>
</html>